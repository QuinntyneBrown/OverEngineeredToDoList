@page "/"

@using MediatR;
@using OverEngineeredToDoList.Core
@inject IMediator Mediator;

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<SurveyPrompt Title="Not too bad so far..." />

@code {

    [CascadingParameter]
    public MainLayout Layout { get; set; }
    
    ToDoDto[]? toDos;

    protected override async Task OnInitializedAsync()
    {
        var response = await Mediator.Send(new GetToDosRequest());

        toDos = response.ToDos.ToArray();

        Layout.ToDosCount = toDos.Count();
    }
}