@page "/"

@using MediatR;
@using OverEngineeredToDoList.Core
@inject IMediator Mediator;

<PageTitle>Over Engineered To Do List</PageTitle>



@code {

    [CascadingParameter]
    public MainLayout CascadedContext { get; set; }
    
    ToDoDto[]? toDos;

    protected override async Task OnInitializedAsync()
    {
        var response = await Mediator.Send(new GetToDosRequest());

        toDos = response.ToDos.ToArray();

        CascadedContext.ToDosCount = toDos.Count();
    }
}